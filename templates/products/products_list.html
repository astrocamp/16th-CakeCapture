{% extends "shared/base.html" %} 

{% block content %}
<section class="pt-[100px] px-[20px] h-full bg-gray-100">
  <div class="flex justify-center gap-2">
    <!-- sidebar -->
    <div class="w-1/6 flex flex-col gap-y-2 text-black font-bold text-xl min-w-[120px]">
      <a href="{% url 'store:products_list' %}" class="border-b-2 border-red-300 hover:scale-105 hover:border-red-400 transition ease-in duration-100">所有商品</a>
      <a href="{% url 'store:category' 'macarons' %}" class="border-b-2 border-red-300 hover:scale-105 hover:border-red-400 transition ease-in duration-100">Macarons</a>
      <a href="{% url 'store:category' 'poundcake' %}" class="border-b-2 border-red-300 hover:scale-105 hover:border-red-400 transition ease-in duration-100">Poundcake</a>
      <a href="{% url 'store:category' 'freshcreamcake' %}" class="border-b-2 border-red-300 hover:scale-105 hover:border-red-400 transition ease-in duration-100">Fresh Cream Cake</a>
      <a href="{% url 'store:category' 'frenchpastry' %}" class="border-b-2 border-red-300 hover:scale-105 hover:border-red-400 transition ease-in duration-100">French Pastry</a>
      <a href="{% url 'store:category' 'chocolate' %}" class="border-b-2 border-red-300 hover:scale-105 hover:border-red-400 transition ease-in duration-100">Chocolate</a>
    </div>
    <!-- products area -->
    <div class="w-2/3 px-6 text-black">
    <!-- title -->
    <h2 class="text-2xl font-bold">| 所有商品 | <span class="text-lg text-red-500">共有 {{ products.paginator.count }} 件商品</span></h2>
    <div class="flex justify-between align-text-bottom">
      <!-- drop-down menu -->
      <div
        x-data="{ dropdownOpen: false, selectedOption: '{{ selected_option }}'}"
        class="my-6 text-md relative p-2 font-bold min-w-[8rem]"
      >
        <div
          @click="dropdownOpen = !dropdownOpen"
          @click.away="dropdownOpen = false"
          class="cursor-pointer select-none flex gap-1"
        >
          <p class="text-lg" x-text="selectedOption"></p>
          <img
            x-bind:class="dropdownOpen ? 'rotate-180 duration-300' : 'rotate-0 duration-300'"
            class="w-4"
            src="https://img.icons8.com/material/24/expand-arrow--v1.png"
            alt="expand-arrow--v1"
          />
        </div>

        <div
          x-show="dropdownOpen"
          x-cloak
          class="absolute left-0 bg-gray-100 text-black text-lg border border-gray-300 shadow rounded-lg w-60 p-3 z-20"
          x-transition:enter="duration-300 ease-out"
          x-transition:enter-start="opacity-0 -translate-y-5 scale-90"
          x-transition:enter-end="opacity-100 -translate-y-0 scale-100"
        >
          <ul>
            <a href="?sort=default">
              <li
                class="rounded-lg hover:bg-red-200 block pd-1 mb-2"
                @click="selectedOption = '預設排序'"
              >
              預設排序
              </li>
            </a>
            <a href="?sort=ph2l">
              <li
                class="rounded-lg hover:bg-red-200 block pd-1 mb-2"
                @click="selectedOption = '價格由高到低'"
              >
              價格由高到低
              </li>
            </a>
            <a href="?sort=pl2h">
              <li
              class="rounded-lg hover:bg-red-200 block pd-1 mb-2"
              @click="selectedOption = '價格由低到高'"
              >
              價格由低到高
              </li>
            </a>
            <a href="#">
              <li
                class="rounded-lg hover:bg-red-200 block pd-1 mb-2"
                @click="selectedOption = '上市日期由舊到新'"
              >
              上市日期由舊到新
              </li>
            </a>
            <a href="#">
              <li
                class="rounded-lg hover:bg-red-200 block pd-1"
                @click="selectedOption = '上市日期由新到舊'"
              >
              上市日期由新到舊
              </li>
            </a>
          </ul>
        </div>
      </div>
      <!-- search bar  -->
      <div class="pt-6 pr-10 relative text-gray-600">
        <form method="get" action="{% url 'store:search' %}">
					<input
          class="border-2 bg-white h-10 px-5 pr-16 rounded-lg text-sm ring-2 ring-gray-100 focus:ring-red-300 focus:outline-none peer"
          type="search"
          name="search"
          placeholder="Search"
          autocomplete="off"
        />
          <button type="submit" class="absolute right-14 top-9">
            <svg
              class="text-gray-600 h-4 w-4 fill-current"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              version="1.1"
              id="Capa_1"
              x="0px"
              y="0px"
              viewBox="0 0 56.966 56.966"
              style="enable-background: new 0 0 56.966 56.966"
              xml:space="preserve"
              width="512px"
              height="512px"
            >
              <path
                d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"
              />
            </svg>
          </button>
				</form>
      </div>
    </div>

    <!-- cards -->
    <div class="flex flex-wrap gap-6">
      {% for product in products %}
      <!-- card -->
      <div class="relative flex w-full min-w-[15rem] max-w-[20rem] flex-col rounded-xl bg-white bg-clip-border text-gray-700 shadow-lg hover:scale-105 transition ease-in duration-300">
        <div class="relative mx-4 mt-4 overflow-hidden rounded-xl bg-blue-gray-500 bg-clip-border text-white shadow-lg shadow-blue-gray-500/40">
          <img src="{{ product.image.url }}" class="w-full h-[288px] object-cover"/>
          <!-- heart -->
          <button class="!absolute top-4 right-4 h-8 max-h-[32px] w-8 max-w-[32px] bg-white/70 select-none rounded-lg text-center align-middle text-xs font-medium text-red-500 transition-all hover:bg-white/90 active:bg-red-500/30"
          type="button" data-ripple-dark="true">
            <span class="absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 transform">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
                aria-hidden="true"
                class="h-6 w-6">
                <path d="M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"/>
              </svg>
            </span>
          </button>
          <!-- cart -->
          <button class="!absolute top-14 right-4 h-8 max-h-[32px] w-8 max-w-[32px] bg-white/70 select-none rounded-lg text-center align-middle text-xs font-medium text-blue-500 transition-all hover:bg-white/90 active:bg-blue-500/30" type="button" data-ripple-dark="true">
            <span class="absolute top-1/2 left-1/2 -translate-y-7 -translate-x-1/2 transform">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="file: mt-4 h-6 w-6 text-sky-600"
              >
                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"/>
              </svg>
            </span>
          </button>
        </div>
      <a href="{% url 'store:product_detail' product.id %}">
        <div class="p-6">
          <div class="mb-3 flex items-center justify-between">
            <!-- 產品名稱 -->
            <h5 class="block text-xl font-bold leading-snug tracking-normal text-blue-gray-900 antialiased">
            {{ product.name }}
            </h5>
            <!-- 產品評價 -->
            <p class="flex items-center gap-1.5 text-lg font-bold leading-relaxed text-blue-gray-900 antialiased">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
                aria-hidden="true"
                class="-mt-0.5 h-5 w-5 text-yellow-500"
              >
                <path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z" clip-rule="evenodd"/>
              </svg>
              5.0
            </p>
          </div>
          <div class="flex items-center justify-between">
            <!-- 產品價格 -->
            <p class="block text-base font-bold text-blue-500">$ {{ product.price }}</p>
          </div>
        </div>
      </a>
    </div>
    {% endfor %}
  </div>
  <!-- 換頁區域 -->
  <div class="flex justify-end gap-3 py-12 pr-11">
    {% if products.has_previous %}
    <a href="?page=1" class="text-gray-600 hover:text-red-400">&laquo 第一頁</a>
    <a href="?page={{ products.previous_page_numver }}" class="text-gray-600 hover:text-red-400">上一頁</a>
    {% endif %}

    <p class="font-bold">Page {{ products.number }} of {{ products.paginator.num_pages }}</p>

    {% if products.has_next %}
    <a href="?page={{ products.next_page_number }}" class="text-gray-600 hover:text-red-400">下一頁</a>
    <a href="?page={{ products.paginator.num_pages }}" class="text-gray-600 hover:text-red-400">最後一頁 &raquo</a>
    {% endif %}
  </div>
</section>



{% endblock %}
