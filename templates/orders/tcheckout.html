<div class="page-wrapper">
  <div class="checkout shopping">
    <div class="container">
      <div class="row">
        <div class="col-md-8">
          <div class="block billing-details">
            <h4 class="widget-title">Billing Details</h4>
            <form method="post" class="checkout-form">
              {% csrf_token %}
              <div class="form-group">
                <label for="name">{{ form.name.label }}</label>
                {{ form.name }}
              </div>
              <div class="form-group">
                <label for="email">{{ form.email.label }}</label>
                {{ form.email }}
              </div>
              <div class="form-group">
                <label for="phone">{{ form.phone.label }}</label>
                {{ form.phone }}
              </div>
              <div class="checkout-country-code clearfix">
                <div class="form-group">
                  <label for="zipcode">{{ form.zipcode.label }}</label>
                  {{ form.zipcode }}
                </div>
                <div class="form-group">
                  <label for="district">{{ form.district.label }}</label>
                  {{ form.district }}
                </div>
              </div>
              <div class="form-group">
                <label for="address">{{ form.address.label }}</label>
                {{ form.address }}
              </div>
              <input type="submit" class="btn btn-main mt-20" />
            </form>
          </div>
        </div>
        <div class="col-md-4">
          <div class="product-checkout-details">
            <div class="block">
              <h4 class="widget-title">Order Summary</h4>
              {% for product in cart_products %}
              <div
                class="flex mt-2 p-2 h-52 rounded-xl text-xl border-2 border-red-300 cake"
                data-product-id="{{product.id}}"
              >
                <div class="w-1/12 felx flex-col m-auto">
                  <input type="checkbox" class="w-7 h-7 m-auto p-2 cb" />
                </div>
                <div class="flex w-1/3 p-2">
                  <div
                    class="product-img rounded-2xl w-[180px] h-[180px] overflow-hidden"
                  >
                    <img
                      src="{{product.image.url}}"
                      alt="#"
                      class="w-full h-full object-cover"
                    />
                  </div>
                  <div class="felx flex-col m-auto w-1/2 p-2">
                    <p>{{product.name}}</p>
                  </div>
                </div>
                <div class="felx flex-col m-auto w-1/6 p-2">
                  <p>{{product.category}}</p>
                </div>
                <div class="felx flex-col m-auto w-1/12 p-2">
                  {% for key, value in quantities.items%} 
                  {% if key == product.id|slugify %}
                  <input
                    type="number"
                    min="1"
                    max="{{product.quantity}}"
                    value="{{ value }}"
                    class="w-24 px-2 py-1 border border-black rounded-lg appearance-none update"
                    data-index="{{product.id}}"
                  />
                  {% endif %} 
                  {% endfor%}
                </div>
                <div class="felx flex-col m-auto w-1/12 p-2">
                  <p>$ {{product.price}}</p>
                </div>
                <div class="felx flex-col m-auto w-1/12 p-2">
                  <p>庫存剩餘：{{product.quantity}}</p>
                </div>
                <div class="felx flex-col m-auto w-1/6 p-2">
                  <div class="m-2 p-2">
                    <a href="#" class="block rounded-xl p-2 bg-red-300">
                      下次再買
                    </a>
                  </div>
                  <div class="m-2 p-2">
                    <a
                      href="#"
                      class="block rounded-xl p-2 bg-red-300 hover:bg-red-500"
                    >
                      <button
                        type="'button"
                        data-index="{{product.id}}"
                        id="delete-btn"
                      >
                        刪除
                      </button></a
                    >
                  </div>
                </div>
              </div>
              {% endfor %}
              <ul class="summary-prices"></ul>
              <div class="summary-total">
                <span>Total</span>
                <span>${{ total }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
